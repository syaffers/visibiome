{% extends "job/job_base.html" %}
{% load static from staticfiles %}

{% block title %}Heatmap Visualization for Job #{{ job.id }}{% endblock %}
{% block job_page %}
  <h2>Heatmap</h2>
  <p>
    The heatmap enables user to view the non-phylogenetic (Bray-Curtis) distances for every
    possible pair of samples. This heatmap is generated with the 250 most similar representative
    samples from the reference database against the user submitted samples.

  </p>
  <p>
    The color gradient gives an idea as to the distance between the samples (white being the
    closest, blue being the farthest). Hover over the heatmap cells to get more information
    regarding the distance between the two corresponding samples.

  </p>

  <!-- Graph generated by heatmap.js -->
  <div id="legend"></div>
  <div class="plot-container">
    <div id="plot"></div>
    <div id="tooltip"></div>
  </div>
{% endblock %}

{% block lazy_js %}
<script src="{% static 'js/d3.v3.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/queue.v1.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/heatmap.js'%}" type="text/javascript"></script>
<script>
  var jobDir = "{{ job_dir }}";
  $(document).ready(function () {
    adjacency(jobDir);
  });
</script>
{% endblock %}

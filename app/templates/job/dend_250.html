{% extends "job/job_base.html" %}
{% load static from staticfiles %}

{% block title %}Dendrogram of 250 Most Similar Samples for {{ job.name }}{% endblock %}
{% block job_page %}
  <h2>Dendrogram of 250 Most Similar Samples</h2>

  <p>
    Hover mouse on sample to see the details of EnvO, Study, Sample depth,
    Source and Ecosystem. Each sample have color(s) rectangles to distinguish
    their ecosystem(s). This Dendrogram is created using the User Sample
    (in RED) against most similar 250 samples from the reference database based
    upon Bray Curtis Distance.
  </p>

  <!-- Graph generated by dendrogram.js -->
  <div id="legend"></div>
  <div class="plot-container">
    <div id="dendrogram"></div>
    <div id="dendrogram-tooltip"></div>
  </div>

{% endblock %}

{% block lazy_js %}
<script src="http://d3js.org/d3.v3.min.js" type="text/javascript"></script>
<script src="{% static 'js/dendrogram.js'%}" type="text/javascript"></script>
<script>
  var dendrogramFilePath = "{{ dendrogram_file_path }}";
  var sampleIds = {{ samples|safe }};
  $(document).ready(function () {
    drawDendrogram(dendrogramFilePath, sampleIds);
  });
</script>
{% endblock %}
